{% extends 'base.html' %}
{% block title %}PIP Details{% endblock %}

{% block content %}
<h1 class="text-2xl font-bold mb-6">
    PIP for {{ employee.first_name }} {{ employee.last_name }}
</h1>

<div class="bg-white p-6 rounded shadow max-w-3xl">
    <p><strong>Status:</strong> {{ pip.status }}</p>
    <p><strong>Start Date:</strong> {{ pip.start_date }}</p>
    <p><strong>Review Date:</strong> {{ pip.review_date }}</p>
    {% if pip.end_date %}
        <p><strong>End Date:</strong> {{ pip.end_date }}</p>
    {% endif %}

    <hr class="my-4">

    <p><strong>Concerns:</strong></p>
    <p class="mb-4 whitespace-pre-line">{{ pip.concerns }}</p>

    <p><strong>Action Plan:</strong></p>
    <p class="mb-4 whitespace-pre-line">{{ pip.action_plan }}</p>

    <p><strong>Meeting Notes:</strong></p>
    <p class="mb-4 whitespace-pre-line">{{ pip.meeting_notes }}</p>

    <p><strong>Outcome:</strong></p>
    <p class="mb-4 whitespace-pre-line">{{ pip.outcome or '—' }}</p>

    <p class="text-sm text-gray-500">Created by {{ pip.created_by }} | Last updated {{ pip.last_updated.strftime('%Y-%m-%d %H:%M') }}</p>
</div>

<a href="{{ url_for('edit_pip', pip_id=pip.id) }}" class="inline-block bg-yellow-500 text-white px-4 py-2 mt-4 rounded hover:bg-yellow-600">
    ✏️ Edit PIP
</a>

<h3 class="text-lg font-semibold mt-6 mb-2">Timeline</h3>
<ul class="border rounded p-4 bg-gray-50">
  {% for event in pip.timeline %}
    <li class="mb-2">
      <strong>{{ event.timestamp.strftime('%Y-%m-%d %H:%M') }}</strong> – 
      <em>{{ event.event_type }}</em> by {{ event.updated_by }}<br>
      {{ event.notes }}
    </li>
  {% else %}
    <li>No timeline events yet.</li>
  {% endfor %}
</ul>


{% endblock %}
