{% extends 'base.html' %}
{% block title %}Employee Detail{% endblock %}

{% block content %}
<h1 class="text-2xl font-bold mb-4">
    {{ employee.first_name }} {{ employee.last_name }}
</h1>

<div class="mb-6 bg-white p-4 rounded shadow">
    <p><strong>Job Title:</strong> {{ employee.job_title }}</p>
    <p><strong>Line Manager:</strong> {{ employee.line_manager }}</p>
    <p><strong>Service:</strong> {{ employee.service }}</p>
    <p><strong>Start Date:</strong> {{ employee.start_date.strftime('%Y-%m-%d') }}</p>
</div>

<div class="mb-6">
    <div class="flex justify-between items-center">
        <h2 class="text-xl font-semibold">Performance Improvement Plans</h2>
        <a href="{{ url_for('create_pip', employee_id=employee.id) }}" class="btn btn-primary">Start New PIP</a>

    </div>
    {% if employee.pips %}
        <ul class="mt-4 space-y-4">
            {% for pip in employee.pips %}
                <li class="bg-white p-4 rounded shadow">
                    <p><strong>Status:</strong> {{ pip.status }}</p>
                    <p><strong>Start Date:</strong> {{ pip.start_date }}</p>
                    <p><strong>Concerns:</strong> {{ pip.concerns|truncate(100) }}</p>
                    <a href="{{ url_for('pip_detail', pip_id=pip.id) }}" class="text-blue-600 underline">View Full PIP</a>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="mt-4">No PIPs recorded yet.</p>
    {% endif %}
</div>
{% endblock %}
